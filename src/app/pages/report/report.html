<h1 class="font-bold text-3xl text-center mb-4">Reportes de mascotas por tu ubicación</h1>
<div
  class="flex justify-center items-center m-auto max-w-xl max-md:my-0 max-md:p-4 my-4 w-2/4 max-md:w-full max-md:px-0 p-8"
>
  <div class="w-full relative">
    <label for="labels-range-input" class="">Radio de busqueda</label>
    <input
      id="labels-range-input"
      type="range"
      min="1000"
      max="10000"
      class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-gray-700"
      (change)="handleChangeRange($event)"
    />
    <span class="text-sm text-gray-500 dark:text-gray-400 absolute start-0 -bottom-6"
      >Min (1000)</span
    >
    <span
      class="text-sm text-gray-500 dark:text-gray-400 absolute start-1/3 -translate-x-1/2 rtl:translate-x-1/2 -bottom-6"
      >4000</span
    >
    <span
      class="text-sm text-gray-500 dark:text-gray-400 absolute start-2/3 -translate-x-1/2 rtl:translate-x-1/2 -bottom-6"
      >7000</span
    >
    <span class="text-sm text-gray-500 dark:text-gray-400 absolute end-0 -bottom-6"
      >Max (10.000)</span
    >
  </div>
</div>
<div
  class="flex-wrap flex-row gap-4 items-center justify-center p-8 max-md:px-0 grid 2xl:grid-cols-5 xl:grid-cols-4 lg:grid-cols-3 md:grid-cols-2 grid-cols-1"
>
  @if(loading()){
  <app-skeletonCardPet />
  <app-skeletonCardPet />
  <app-skeletonCardPet />
  <app-skeletonCardPet />
  <app-skeletonCardPet />
  }@else{ @for(pet of pets();track pet.objectID ){
  <div class="h-full grid">
    <app-petCard
      class="max-md:w-full"
      title="{{ pet.name }}"
      img="{{ pet.img }}"
      location="{{ pet.lugar }}"
      id="{{ pet.objectID }}"
      (reportPet)="handleReportPetModal($event)"
      [owner]="false"
    />
  </div>

  } } @if(reportPetForId.value.id){
  <div
    class="overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full h-full md:inset-0 max-h-full flex backdrop-brightness-50"
  >
    <div class="relative p-4 w-full max-w-md max-h-full">
      <!-- Modal content -->
      <div class="relative bg-white rounded-lg shadow-sm">
        <!-- Modal header -->
        <div
          class="flex items-center justify-between p-4 md:p-5 border-b rounded-t border-gray-200"
        >
          <h3 class="text-lg font-semibold text-gray-900">
            Reportar a {{ reportPetForId.value.fullNamePet }}
          </h3>
          <button
            type="button"
            (click)="handleCloseModal()"
            class="cursor-pointer text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
          >
            <svg class="w-3 h-3" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
              <path
                stroke="currentColor"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
              />
            </svg>
            <span class="sr-only">Close modal</span>
          </button>
        </div>
        <!-- Modal body -->
        <form
          class="p-4 md:p-5"
          [formGroup]="reportPetForId"
          id="reportPetForId"
          (submit)="createReportPetid($event)"
        >
          @if(messageReport()){
          <div
            class="flex items-center p-4 mb-4 text-sm text-red-800 border border-red-300 rounded-lg bg-red-50"
            role="alert"
          >
            <svg
              class="shrink-0 inline w-4 h-4 me-3"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              viewBox="0 0 20 20"
            >
              <path
                d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5ZM9.5 4a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3ZM12 15H8a1 1 0 0 1 0-2h1v-3H8a1 1 0 0 1 0-2h2a1 1 0 0 1 1 1v4h1a1 1 0 0 1 0 2Z"
              />
            </svg>
            <span class="sr-only">Info</span>
            <div>
              <span class="font-medium">{{ messageReport() }}</span>
            </div>
          </div>
          }
          <div class="grid gap-4 mb-4 grid-cols-2">
            <div class="col-span-2">
              <label for="fullName" class="block mb-2 text-sm font-medium text-gray-900"
                >Nombre <span class="text-red-600">*</span></label
              >
              <input
                type="text"
                name="fullName"
                id="fullName"
                formControlName="fullName"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5 {{
                  user.fullName ? 'cursor-not-allowed' : ''
                }}"
                placeholder="Bruno Ken"
                required
              />
            </div>
            <div class="col-span-2">
              <label for="price" class="block mb-2 text-sm font-medium text-gray-900"
                >Teléfono <span class="text-red-600">*</span></label
              >
              <input
                type="number"
                name="price"
                id="price"
                formControlName="phone"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-600 focus:border-primary-600 block w-full p-2.5"
                placeholder="123456789"
                required
              />
            </div>
            <div class="col-span-2">
              <label for="description" class="block mb-2 text-sm font-medium text-gray-900"
                >Dónde lo viste? <span class="text-red-600">*</span></label
              >
              <textarea
                id="description"
                rows="4"
                formControlName="message"
                class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500"
                placeholder="Lo vi en Buenos Aires, cerca del parque..."
                required
              ></textarea>
            </div>
          </div>
          <app-button
            title="Reportar"
            type="submit"
            form="reportPetForId"
            [loading]="loadingCreateReport()"
          />
        </form>
      </div>
    </div>
  </div>
  }
</div>
